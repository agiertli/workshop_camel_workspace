- route:
    id: kafka-to-expense-api
    from:
      id: from-3160
      uri: "kafka:globex.order-aggregated"
      parameters:
        autoOffsetReset: earliest
        brokers: "kafka-kafka-bootstrap.user1-globex.svc.cluster.local:9092"
        groupId: order-cashback-connector
        securityProtocol: SASL_PLAINTEXT
        saslMechanism: SCRAM-SHA-512
        saslJaasConfig: "org.apache.kafka.common.security.scram.ScramLoginModule required username='globex' password='globex';"
      steps:
        - log:
            id: log-2134
            message: "Picked up customer aggregated order message: '${body}'"
        - choice:
            id: choice-4933
            otherwise:
              id: otherwise-1534
              steps:
                - to:
                    id: to-3836
                    uri: "rest:post:/expense"
                    parameters:
                      bindingMode: "off"
                      host: "cashback-service.user1-globex.svc.cluster.local:8080"
            when:
              - id: when-1131
                steps:
                  - stop:
                      id: stop-4849
                expression:
                  simple:
                    expression: ${body} == ${null} || ${body} regex "\s*"
